{"version":3,"file":"arch-collection-details-dataset-table.js","sources":["../../../../../web-components/src/archCollectionDetailsDatasetTable/src/styles.ts","../../../../../web-components/src/archCollectionDetailsDatasetTable/src/arch-collection-details-dataset-table.ts"],"sourcesContent":["import { css } from \"lit\";\n\nexport default [\n  css`\n    data-table > table {\n      table-layout: fixed;\n    }\n\n    data-table > table > thead > tr > th.category {\n      width: 7em;\n    }\n\n    data-table > table > thead > tr > th.sample {\n      width: 6em;\n    }\n\n    data-table > table > thead > tr > th.state {\n      width: 7em;\n    }\n\n    data-table > table > thead > tr > th.started {\n      width: 9em;\n    }\n\n    data-table > table > thead > tr > th.finished {\n      width: 9em;\n    }\n\n    data-table > table > thead > tr > th {\n      max-width: none;\n    }\n  `,\n];\n","import { PropertyValues } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators.js\";\n\nimport { ArchDataTable } from \"../../archDataTable/index\";\nimport { BoolDisplayMap, EventTypeDisplayMap } from \"../../lib/constants\";\nimport { Dataset } from \"../../lib/types\";\nimport { Topics } from \"../../lib/pubsub\";\nimport {\n  Paths,\n  isActiveProcessingState,\n  isoStringToDateString,\n} from \"../../lib/helpers\";\nimport { ProcessingState } from \"../../lib/types\";\nimport Styles from \"./styles\";\n\n@customElement(\"arch-collection-details-dataset-table\")\nexport class ArchCollectionDetailsDatasetTable extends ArchDataTable<Dataset> {\n  @property({ type: Number }) collectionId!: number;\n\n  @state() columnNameHeaderTooltipMap = {\n    category:\n      \"Dataset categories are Collection, Network, Text, and File Format\",\n    sample:\n      \"Sample datasets contain only the first 100 available records from a collection\",\n  };\n\n  static styles = [...ArchDataTable.styles, ...Styles];\n\n  willUpdate(_changedProperties: PropertyValues) {\n    super.willUpdate(_changedProperties);\n\n    this.apiCollectionEndpoint = \"/datasets\";\n    this.apiItemResponseIsArray = true;\n    this.apiItemTemplate = \"/datasets?id=:id\";\n    this.itemPollPredicate = (item) => isActiveProcessingState(item.state);\n    this.itemPollPeriodSeconds = 3;\n    this.apiStaticParamPairs = [[\"collection_id\", `${this.collectionId}`]];\n    this.cellRenderers = [\n      (name, dataset) =>\n        dataset.state !== ProcessingState.FINISHED\n          ? `${dataset.name}`\n          : `<a href=\"${Paths.dataset(dataset.id)}\">\n               <span class=\"highlightable\">${dataset.name}</span>\n            </a>`,\n      (categoryName) => categoryName as Dataset[\"category_name\"],\n      (isSample) =>\n        BoolDisplayMap[(isSample as Dataset[\"is_sample\"]).toString()],\n      (state) => EventTypeDisplayMap[state as Dataset[\"state\"]],\n      (startTime) => isoStringToDateString(startTime as Dataset[\"start_time\"]),\n      (finishedTime) =>\n        finishedTime === null\n          ? \"\"\n          : isoStringToDateString(finishedTime as Dataset[\"finished_time\"]),\n    ];\n    this.columnFilterDisplayMaps = [undefined, undefined, BoolDisplayMap];\n    this.columns = [\n      \"name\",\n      \"category_name\",\n      \"is_sample\",\n      \"state\",\n      \"start_time\",\n      \"finished_time\",\n    ];\n    this.columnHeaders = [\n      \"Dataset\",\n      \"Category\",\n      \"Sample\",\n      \"State\",\n      \"Started\",\n      \"Finished\",\n    ];\n    this.filterableColumns = [true, true, true, true, false, false];\n    this.nonSelectionActionLabels = [\"Generate a New Dataset\"];\n    this.nonSelectionActions = [Topics.GENERATE_DATASET];\n    this.singleName = \"Dataset\";\n    this.sort = \"-start_time\";\n    this.sortableColumns = [true, true, true, true, true, true];\n    this.persistSearchStateInUrl = true;\n    this.pluralName = \"Datasets\";\n  }\n\n  nonSelectionActionHandler(action: string) {\n    switch (action) {\n      case Topics.GENERATE_DATASET:\n        window.location.href = Paths.generateCollectionDataset(\n          this.collectionId\n        );\n        break;\n      default:\n        break;\n    }\n  }\n}\n\n// Injects the tag into the global name space\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"arch-collection-details-dataset-table\": ArchCollectionDetailsDatasetTable;\n  }\n}\n"],"names":["Styles","css","ArchCollectionDetailsDatasetTable","ArchDataTable","constructor","this","columnNameHeaderTooltipMap","category","sample","willUpdate","_changedProperties","super","apiCollectionEndpoint","apiItemResponseIsArray","apiItemTemplate","itemPollPredicate","item","isActiveProcessingState","state","itemPollPeriodSeconds","apiStaticParamPairs","collectionId","cellRenderers","name","dataset","ProcessingState","FINISHED","Paths","id","categoryName","isSample","BoolDisplayMap","toString","EventTypeDisplayMap","startTime","isoStringToDateString","finishedTime","columnFilterDisplayMaps","undefined","columns","columnHeaders","filterableColumns","nonSelectionActionLabels","nonSelectionActions","Topics","GENERATE_DATASET","singleName","sort","sortableColumns","persistSearchStateInUrl","pluralName","nonSelectionActionHandler","action","window","location","href","generateCollectionDataset","styles","__decorate","property","type","Number","prototype","customElement"],"mappings":"8mBAEA,IAAeA,EAAA,CACbC,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCaE,IAAMC,EAAN,cAAgDC,EAAhDC,kCAGIC,KAAAC,2BAA6B,CACpCC,SACE,oEACFC,OACE,iFAqEL,CAhECC,WAAWC,GACTC,MAAMF,WAAWC,GAEjBL,KAAKO,sBAAwB,YAC7BP,KAAKQ,wBAAyB,EAC9BR,KAAKS,gBAAkB,mBACvBT,KAAKU,kBAAqBC,GAASC,EAAwBD,EAAKE,OAChEb,KAAKc,sBAAwB,EAC7Bd,KAAKe,oBAAsB,CAAC,CAAC,gBAAiB,GAAGf,KAAKgB,iBACtDhB,KAAKiB,cAAgB,CACnB,CAACC,EAAMC,IACLA,EAAQN,QAAUO,EAAgBC,SAC9B,GAAGF,EAAQD,OACX,YAAYI,EAAMH,QAAQA,EAAQI,qDACDJ,EAAQD,gCAE9CM,GAAiBA,EACjBC,GACCC,EAAgBD,EAAkCE,YACnDd,GAAUe,EAAoBf,GAC9BgB,GAAcC,EAAsBD,GACpCE,GACkB,OAAjBA,EACI,GACAD,EAAsBC,IAE9B/B,KAAKgC,wBAA0B,MAACC,OAAWA,EAAWP,GACtD1B,KAAKkC,QAAU,CACb,OACA,gBACA,YACA,QACA,aACA,iBAEFlC,KAAKmC,cAAgB,CACnB,UACA,WACA,SACA,QACA,UACA,YAEFnC,KAAKoC,kBAAoB,EAAC,GAAM,GAAM,GAAM,GAAM,GAAO,GACzDpC,KAAKqC,yBAA2B,CAAC,0BACjCrC,KAAKsC,oBAAsB,CAACC,EAAOC,kBACnCxC,KAAKyC,WAAa,UAClBzC,KAAK0C,KAAO,cACZ1C,KAAK2C,gBAAkB,EAAC,GAAM,GAAM,GAAM,GAAM,GAAM,GACtD3C,KAAK4C,yBAA0B,EAC/B5C,KAAK6C,WAAa,UACnB,CAEDC,0BAA0BC,GACxB,GAAQA,IACDR,EAAOC,iBACVQ,OAAOC,SAASC,KAAO5B,EAAM6B,0BAC3BnD,KAAKgB,aAMZ,GAjEMnB,EAAMuD,OAAG,IAAItD,EAAcsD,UAAWzD,GATjB0D,EAAA,CAA3BC,EAAS,CAAEC,KAAMC,UAAgC3D,EAAA4D,UAAA,oBAAA,GAEzCJ,EAAA,CAARxC,KAKChB,EAAA4D,UAAA,kCAAA,GARS5D,EAAiCwD,EAAA,CAD7CK,EAAc,0CACF7D"}