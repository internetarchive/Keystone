{"version":3,"file":"collection-surveyor-cart.js","sources":["../../../../../web-components/src/collectionSurveyorCart/src/collection-surveyor-cart.ts"],"sourcesContent":["import { html, css, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators.js\";\n\nimport { CollectionSelectedDetail } from \"../../lib/types\";\n\nimport {\n  humanBytes,\n  timestampStringToYearMonthString,\n} from \"../../lib/helpers\";\nimport { EventHelpers } from \"@internetarchive/ads-library\";\n\n@customElement(\"collection-surveyor-cart\")\nexport class CollectionSurveyorCart extends LitElement {\n  @property({ type: Object })\n  collectionsInCart: { [collectionName: string]: CollectionSelectedDetail } =\n    {};\n\n  private get totalCollectionSizeSelected(): number {\n    // sum collectionSize (bytes) from each selected collection\n    const collectionSum = Object.values(this.collectionsInCart).reduce(\n      (current, acc) => current + Number(acc.collectionSize),\n      0\n    );\n\n    return collectionSum;\n  }\n\n  handleRemoveCollectionFromCart(collectionName: string) {\n    this.emitEvent(\"collection-removed-from-cart\", { collectionName });\n  }\n\n  private emitEvent(eventName: string, detail = {}) {\n    this.dispatchEvent(\n      EventHelpers.createEvent(eventName, detail ? { detail } : {})\n    );\n  }\n\n  render() {\n    return html`\n      <div class=\"cart-container\">\n        <div class=\"collections-cart\">\n          <h3>Collections Selected</h3>\n          <ul>\n            ${Object.entries(this.collectionsInCart).map(\n              ([collectionName, value]) => html`\n                <li>\n                  <a\n                    class=\"collectionName\"\n                    href=\"https://archive-it.org/collections/${value.collectionId}\"\n                    target=\"_blank\"\n                    >${collectionName}</a\n                  >, Organization: ${value.organizationName}, Archived Since:\n                  ${timestampStringToYearMonthString(value.createdDt)},\n                  Collection Size: ${humanBytes(Number(value.collectionSize))}\n                  <button\n                    @click=${() =>\n                      this.handleRemoveCollectionFromCart(collectionName)}\n                  >\n                    remove\n                  </button>\n                </li>\n              `\n            )}\n          </ul>\n          <h4>\n            Total Collection Size Selected:\n            <span class=\"totalSizeSelected\"\n              >${humanBytes(this.totalCollectionSizeSelected)}</span\n            >\n          </h4>\n        </div>\n      </div>\n    `;\n  }\n\n  static styles = css`\n    .cart-container {\n      padding: 20px 50px;\n    }\n    .collections-cart {\n      padding: 20px;\n      border-radius: 6px;\n      background-color: rgb(255, 255, 255);\n      box-shadow: rgb(136, 136, 136) 1px 1px 6px;\n    }\n    .totalSizeSelected {\n      font-weight: normal;\n    }\n    button {\n      background: none;\n      border: none;\n      cursor: pointer;\n      color: red;\n      text-decoration: underline;\n    }\n    li {\n      margin: 0.6em 0;\n      line-height: 1.25;\n    }\n    .collectionName {\n      font-weight: bold;\n    }\n    a {\n      color: #c9540a;\n    }\n  `;\n}\n"],"names":["CollectionSurveyorCart","LitElement","constructor","this","collectionsInCart","totalCollectionSizeSelected","Object","values","reduce","current","acc","Number","collectionSize","handleRemoveCollectionFromCart","collectionName","emitEvent","eventName","detail","dispatchEvent","EventHelpers","createEvent","render","html","entries","map","value","collectionId","organizationName","timestampStringToYearMonthString","createdDt","humanBytes","styles","css","__decorate","property","type","prototype","customElement"],"mappings":"6KAYO,IAAMA,EAAN,cAAqCC,EAArCC,kCAELC,KAAiBC,kBACf,EA2FH,CAzFaC,kCAOV,OALsBC,OAAOC,OAAOJ,KAAKC,mBAAmBI,QAC1D,CAACC,EAASC,IAAQD,EAAUE,OAAOD,EAAIE,iBACvC,EAIH,CAEDC,+BAA+BC,GAC7BX,KAAKY,UAAU,+BAAgC,CAAED,kBAClD,CAEOC,UAAUC,EAAmBC,EAAS,IAC5Cd,KAAKe,cACHC,EAAaC,YAAYJ,EAAWC,EAAS,CAAEA,UAAW,CAAE,GAE/D,CAEDI,SACE,OAAOC,CAAI;;;;;cAKDhB,OAAOiB,QAAQpB,KAAKC,mBAAmBoB,KACvC,EAAEV,EAAgBW,KAAWH,CAAI;;;;+DAIgBG,EAAMC;;uBAE9CZ;qCACcW,EAAME;oBACvBC,EAAiCH,EAAMI;qCACtBC,EAAWnB,OAAOc,EAAMb;;6BAEhC,IACPT,KAAKU,+BAA+BC;;;;;;;;;;iBAWzCgB,EAAW3B,KAAKE;;;;;KAM9B,GAEML,EAAM+B,OAAGC,CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA7DnBC,EAAA,CADCC,EAAS,CAAEC,KAAM7B,UAEbN,EAAAoC,UAAA,yBAAA,GAHMpC,EAAsBiC,EAAA,CADlCI,EAAc,6BACFrC"}