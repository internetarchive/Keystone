{"version":3,"file":"arch-global-modal.js","sources":["../../../../../web-components/src/archGlobalModal/src/arch-global-modal.ts"],"sourcesContent":["import { css } from \"lit\";\nimport { customElement } from \"lit/decorators.js\";\n\nimport { GlobalModalDetail } from \"../../lib/types\";\n\nimport { ArchModal } from \"../../archModal\";\n\n@customElement(\"arch-global-modal\")\nexport class ArchGlobalModal extends ArchModal {\n  static styles = [\n    ...ArchModal.styles,\n    css`\n      h2[slot=\"heading\"].error {\n        color: #f00;\n      }\n    `,\n  ];\n\n  private static NotificationModalEventName = \"show-notification-modal\";\n  private static ErrorModalEventName = \"show-error-modal\";\n\n  connectedCallback() {\n    super.connectedCallback();\n    this.hideSubmitButton = true;\n    this.cancelButtonText = \"Close\";\n    document.addEventListener(\n      ArchGlobalModal.ErrorModalEventName,\n      this.errorHandler.bind(this),\n      true\n    );\n    document.addEventListener(\n      ArchGlobalModal.NotificationModalEventName,\n      this.notificationHandler.bind(this),\n      true\n    );\n  }\n\n  private get headingEl(): HTMLElement {\n    return (this.shadowRoot as ShadowRoot).querySelector(\n      \"h2[slot=heading]\"\n    ) as HTMLElement;\n  }\n\n  private get contentSlot(): HTMLElement {\n    return (this.shadowRoot as ShadowRoot).querySelector(\n      \"slot[name=content]\"\n    ) as HTMLElement;\n  }\n\n  private errorHandler(e: Event) {\n    const { message, elementToFocusOnClose } = (\n      e as CustomEvent<GlobalModalDetail>\n    ).detail;\n    this.elementToFocusOnClose = elementToFocusOnClose;\n    this.title = `âš  Error`;\n    this.contentSlot.innerHTML = message;\n    this.headingEl.classList.add(\"error\");\n    this.open = true;\n  }\n\n  private notificationHandler(e: Event) {\n    const { message, elementToFocusOnClose, title } = (\n      e as CustomEvent<GlobalModalDetail>\n    ).detail;\n    this.elementToFocusOnClose = elementToFocusOnClose;\n    this.title = title;\n    this.contentSlot.innerHTML = message;\n    this.headingEl.classList.remove(\"error\");\n    this.open = true;\n  }\n\n  private static show(\n    eventName: string,\n    title: string,\n    message: string,\n    elementToFocusOnClose: HTMLElement\n  ) {\n    document.dispatchEvent(\n      new CustomEvent(eventName, {\n        bubbles: true,\n        composed: true,\n        detail: { title, message, elementToFocusOnClose },\n      })\n    );\n  }\n\n  static showNotification(\n    title: string,\n    message: string,\n    elementToFocusOnClose: HTMLElement\n  ) {\n    this.show(\n      ArchGlobalModal.NotificationModalEventName,\n      title,\n      message,\n      elementToFocusOnClose\n    );\n  }\n\n  static showError(\n    title: string,\n    message: string,\n    elementToFocusOnClose: HTMLElement\n  ) {\n    this.show(\n      ArchGlobalModal.ErrorModalEventName,\n      title,\n      message,\n      elementToFocusOnClose\n    );\n  }\n}\n\n// Injects the tag into the global name space\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"arch-global-modal\": ArchGlobalModal;\n  }\n}\n"],"names":["ArchGlobalModal","ArchGlobalModal_1","ArchModal","connectedCallback","super","this","hideSubmitButton","cancelButtonText","document","addEventListener","ErrorModalEventName","errorHandler","bind","NotificationModalEventName","notificationHandler","headingEl","shadowRoot","querySelector","contentSlot","e","message","elementToFocusOnClose","detail","title","innerHTML","classList","add","open","remove","static","eventName","dispatchEvent","CustomEvent","bubbles","composed","show","styles","css","__decorate","customElement"],"mappings":"yNAQO,IAAMA,EAAeC,EAArB,cAA8BC,EAanCC,oBACEC,MAAMD,oBACNE,KAAKC,kBAAmB,EACxBD,KAAKE,iBAAmB,QACxBC,SAASC,iBACPR,EAAgBS,oBAChBL,KAAKM,aAAaC,KAAKP,OACvB,GAEFG,SAASC,iBACPR,EAAgBY,2BAChBR,KAAKS,oBAAoBF,KAAKP,OAC9B,EAEH,CAEWU,gBACV,OAAQV,KAAKW,WAA0BC,cACrC,mBAEH,CAEWC,kBACV,OAAQb,KAAKW,WAA0BC,cACrC,qBAEH,CAEON,aAAaQ,GACnB,MAAMC,QAAEA,EAAOC,sBAAEA,GACfF,EACAG,OACFjB,KAAKgB,sBAAwBA,EAC7BhB,KAAKkB,MAAQ,UACblB,KAAKa,YAAYM,UAAYJ,EAC7Bf,KAAKU,UAAUU,UAAUC,IAAI,SAC7BrB,KAAKsB,MAAO,CACb,CAEOb,oBAAoBK,GAC1B,MAAMC,QAAEA,EAAOC,sBAAEA,EAAqBE,MAAEA,GACtCJ,EACAG,OACFjB,KAAKgB,sBAAwBA,EAC7BhB,KAAKkB,MAAQA,EACblB,KAAKa,YAAYM,UAAYJ,EAC7Bf,KAAKU,UAAUU,UAAUG,OAAO,SAChCvB,KAAKsB,MAAO,CACb,CAEOE,YACNC,EACAP,EACAH,EACAC,GAEAb,SAASuB,cACP,IAAIC,YAAYF,EAAW,CACzBG,SAAS,EACTC,UAAU,EACVZ,OAAQ,CAAEC,QAAOH,UAASC,2BAG/B,CAEDQ,wBACEN,EACAH,EACAC,GAEAhB,KAAK8B,KACHlC,EAAgBY,2BAChBU,EACAH,EACAC,EAEH,CAEDQ,iBACEN,EACAH,EACAC,GAEAhB,KAAK8B,KACHlC,EAAgBS,oBAChBa,EACAH,EACAC,EAEH,GArGMrB,EAAAoC,OAAS,IACXlC,EAAUkC,OACbC,CAAG;;;;OAOUrC,EAA0Ba,2BAAG,0BAC7Bb,EAAmBU,oBAAG,mBAX1BV,EAAeC,EAAAqC,EAAA,CAD3BC,EAAc,sBACFvC"}