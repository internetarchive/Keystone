import{S as e,d as t}from"./chunk-define-element.js";import{i as n,e as o,y as i,x as s,l as r}from"./chunk-query-assigned-elements.js";import{t as l}from"./chunk-state.js";import{i as a}from"./chunk-styles.js";import{l as c}from"./chunk-scale-large.js";import{e as h,i as d,t as p}from"./chunk-directive.js";const u=n`
:host([disabled]) ::slotted([slot=trigger]){pointer-events:none}slot[name=longpress-describedby-descriptor]{display:none}
`;var g=Object.defineProperty,m=Object.getOwnPropertyDescriptor,f=(e,t,n,o)=>{for(var i,s=o>1?void 0:o?m(t,n):t,r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o?i(t,n,s):i(s))||s);return o&&s&&g(t,n,s),s};class v extends e{constructor(){super(...arguments),this.content="click hover longpress",this.offset=6,this.disabled=!1,this.clickContent=[],this.longpressContent=[],this.hoverContent=[],this.targetContent=[]}static get styles(){return[u]}getAssignedElementsFromSlot(e){return e.assignedElements({flatten:!0})}handleTriggerContent(e){this.targetContent=this.getAssignedElementsFromSlot(e.target)}handleSlotContent(e){switch(e.target.name){case"click-content":this.clickContent=this.getAssignedElementsFromSlot(e.target);break;case"longpress-content":this.longpressContent=this.getAssignedElementsFromSlot(e.target);break;case"hover-content":this.hoverContent=this.getAssignedElementsFromSlot(e.target)}}handleBeforetoggle(e){const{target:t}=e;let n;if(t===this.clickOverlayElement)n="click";else if(t===this.longpressOverlayElement)n="longpress";else{if(t!==this.hoverOverlayElement)return;n="hover"}"open"===e.newState?this.open=n:this.open===n&&(this.open=void 0)}update(e){var t,n,o,i,s,r;e.has("clickContent")&&(this.clickPlacement=(null==(t=this.clickContent[0])?void 0:t.getAttribute("placement"))||(null==(n=this.clickContent[0])?void 0:n.getAttribute("direction"))||void 0),e.has("hoverContent")&&(this.hoverPlacement=(null==(o=this.hoverContent[0])?void 0:o.getAttribute("placement"))||(null==(i=this.hoverContent[0])?void 0:i.getAttribute("direction"))||void 0),e.has("longpressContent")&&(this.longpressPlacement=(null==(s=this.longpressContent[0])?void 0:s.getAttribute("placement"))||(null==(r=this.longpressContent[0])?void 0:r.getAttribute("direction"))||void 0),super.update(e)}renderSlot(e){return i`
            <slot name=${e} @slotchange=${this.handleSlotContent}></slot>
        `}renderClickOverlay(){Promise.resolve().then((function(){return pt}));const e=this.renderSlot("click-content");return this.clickContent.length?i`
            <sp-overlay
                id="click-overlay"
                ?disabled=${this.disabled||!this.clickContent.length}
                ?open=${"click"===this.open&&!!this.clickContent.length}
                .offset=${this.offset}
                .placement=${this.clickPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"click"}
                .type=${"modal"!==this.type?"auto":"modal"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${e}
            </sp-overlay>
        `:e}renderHoverOverlay(){Promise.resolve().then((function(){return pt}));const e=this.renderSlot("hover-content");return this.hoverContent.length?i`
            <sp-overlay
                id="hover-overlay"
                ?disabled=${this.disabled||!this.hoverContent.length||!!this.open&&"hover"!==this.open}
                ?open=${"hover"===this.open&&!!this.hoverContent.length}
                .offset=${this.offset}
                .placement=${this.hoverPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"hover"}
                .type=${"hint"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${e}
            </sp-overlay>
        `:e}renderLongpressOverlay(){Promise.resolve().then((function(){return pt}));const e=this.renderSlot("longpress-content");return this.longpressContent.length?i`
            <sp-overlay
                id="longpress-overlay"
                ?disabled=${this.disabled||!this.longpressContent.length}
                ?open=${"longpress"===this.open&&!!this.longpressContent.length}
                .offset=${this.offset}
                .placement=${this.longpressPlacement||this.placement}
                .triggerElement=${this.targetContent[0]}
                .triggerInteraction=${"longpress"}
                .type=${"auto"}
                @beforetoggle=${this.handleBeforetoggle}
            >
                ${e}
            </sp-overlay>
            <slot name="longpress-describedby-descriptor"></slot>
        `:e}render(){const e=this.content.split(" ");return i`
            <slot
                id="trigger"
                name="trigger"
                @slotchange=${this.handleTriggerContent}
            ></slot>
            ${[e.includes("click")?this.renderClickOverlay():i``,e.includes("hover")?this.renderHoverOverlay():i``,e.includes("longpress")?this.renderLongpressOverlay():i``]}
        `}updated(e){super.updated(e),this.disabled&&e.has("disabled")&&(this.open=void 0)}async getUpdateComplete(){return await super.getUpdateComplete()}}function y(e){return"undefined"!=typeof window&&null!=window.navigator&&e.test(window.navigator.platform)}function b(){return y(/^iPad/)||y(/^Mac/)&&navigator.maxTouchPoints>1}function w(){return y(/^iPhone/)||b()}function E(){return function(e){return"undefined"!=typeof window&&null!=window.navigator&&e.test(window.navigator.userAgent)}(/Android/)}f([o()],v.prototype,"content",2),f([o({reflect:!0})],v.prototype,"placement",2),f([o()],v.prototype,"type",2),f([o({type:Number})],v.prototype,"offset",2),f([o({reflect:!0})],v.prototype,"open",2),f([o({type:Boolean,reflect:!0})],v.prototype,"disabled",2),f([l()],v.prototype,"clickContent",2),f([l()],v.prototype,"longpressContent",2),f([l()],v.prototype,"hoverContent",2),f([l()],v.prototype,"targetContent",2),f([a("#click-overlay",!0)],v.prototype,"clickOverlayElement",2),f([a("#longpress-overlay",!0)],v.prototype,"longpressOverlayElement",2),f([a("#hover-overlay",!0)],v.prototype,"hoverOverlayElement",2),t("overlay-trigger",v);const x=Symbol("element resolver updated");class C{constructor(e,{selector:t}={selector:""}){this._element=null,this._selector="",this.mutationCallback=e=>{let t=!1;e.forEach((e=>{if(!t){if("childList"===e.type){const n=this.element&&[...e.removedNodes].includes(this.element),o=!!this.selector&&[...e.addedNodes].some((e=>{var t;return null==(t=null==e?void 0:e.matches)?void 0:t.call(e,this.selector)}));t=t||n||o}if("attributes"===e.type){const n=e.target===this.element,o=!!this.selector&&e.target.matches(this.selector);t=t||n||o}}})),t&&this.resolveElement()},this.host=e,this.selector=t,this.observer=new MutationObserver(this.mutationCallback),this.host.addController(this)}get element(){return this._element}set element(e){if(e===this.element)return;const t=this.element;this._element=e,this.host.requestUpdate(x,t)}get selector(){return this._selector}set selector(e){e!==this.selector&&(this.releaseElement(),this._selector=e,this.resolveElement())}hostConnected(){this.resolveElement(),this.observer.observe(this.host.getRootNode(),{subtree:!0,childList:!0,attributes:!0})}hostDisconnected(){this.releaseElement(),this.observer.disconnect()}resolveElement(){if(!this.selector)return void this.releaseElement();const e=this.host.getRootNode();this.element=e.querySelector(this.selector)}releaseElement(){this.element=null}}function P(e,t,n){const o=Array.isArray(n)?n:[n],i=e.getAttribute(t),s=i?i.split(/\s+/):[];return o.every((e=>s.indexOf(e)>-1))?()=>{}:(s.push(...o),e.setAttribute(t,s.join(" ")),()=>function(e,t,n){const o=e.getAttribute(t);let i=o?o.split(/\s+/):[];i=i.filter((e=>!n.find((t=>e===t)))),i.length?e.setAttribute(t,i.join(" ")):e.removeAttribute(t)}(e,t,o))}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const T=h(class extends d{constructor(e){var t;if(super(e),e.type!==p.ATTRIBUTE||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const o=e[n];return null==o?t:t+`${n=n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${o};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.vt){this.vt=new Set;for(const e in t)this.vt.add(e);return this.render(t)}this.vt.forEach((e=>{null==t[e]&&(this.vt.delete(e),e.includes("-")?n.removeProperty(e):n[e]="")}));for(const e in t){const o=t[e];null!=o&&(this.vt.add(e),e.includes("-")?n.setProperty(e,o):n[e]=o)}return s}});const k=new class{constructor(e={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,e)}async openTimer(e){if(this.cancelCooldownTimer(),!this.component||e!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=e,!this.isWarm&&(this.promise=new Promise((e=>{this.resolve=e,this.timeout=window.setTimeout((()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)}),this.warmUpDelay)})),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(e){this.component&&this.component===e&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout((()=>{this.isWarm=!1,delete this.cooldownTimeout}),this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}},O=()=>{};class A extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="open",this.newState="closed"}}class L extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="closed",this.newState="open"}}const S=(e,t,n)=>{const o=new AbortController,i=new Map,s=()=>{o.abort(),n()};let r,l;const a=requestAnimationFrame((()=>{r=requestAnimationFrame((()=>{l=requestAnimationFrame((()=>{s()}))}))})),c=t=>{t.target===e&&(i.set(t.propertyName,i.get(t.propertyName)-1),i.get(t.propertyName)||i.delete(t.propertyName),0===i.size&&s())};e.addEventListener("transitionrun",(t=>{t.target===e&&(i.has(t.propertyName)||i.set(t.propertyName,0),i.set(t.propertyName,i.get(t.propertyName)+1),cancelAnimationFrame(a),cancelAnimationFrame(r),cancelAnimationFrame(l))}),{signal:o.signal}),e.addEventListener("transitionend",c,{signal:o.signal}),e.addEventListener("transitioncancel",c,{signal:o.signal}),t()};function D(){return new Promise((e=>requestAnimationFrame((()=>e()))))}const R=["button","[focusable]","[href]","input","label","select","textarea","[tabindex]"],$=':not([tabindex="-1"])',F=R.join(`${$}, `)+$,N=R.join(", "),B=e=>e.querySelector(F),M=e=>e.assignedElements().find((e=>e.matches(F)));class H{constructor(e,t){this.x=0,this.y=0,this.x=e,this.y=t}updateBoundingClientRect(e,t){this.x=e,this.y=t,dt.update()}getBoundingClientRect(){return{width:0,height:0,top:this.y,right:this.x,y:this.y,x:this.x,bottom:this.y,left:this.x,toJSON(){}}}}const j="showPopover"in document.createElement("div");const W=new class{constructor(){this.root=document.body,this.stack=[],this.handlePointerdown=e=>{this.pointerdownPath=e.composedPath()},this.handlePointerup=()=>{var e;if(!this.stack.length||null==(e=this.pointerdownPath)||!e.length)return;const t=this.pointerdownPath;this.pointerdownPath=void 0;const n=this.stack.filter((e=>!t.find((t=>t===e||t===(null==e?void 0:e.triggerElement)))&&!e.shouldPreventClose()));n.reverse(),n.forEach((e=>{this.closeOverlay(e);let t=e.parentOverlayToForceClose;for(;t;)this.closeOverlay(t),t=t.parentOverlayToForceClose}))},this.handleBeforetoggle=e=>{const{target:t,newState:n}=e;"open"!==n&&this.closeOverlay(t)},this.handleKeydown=e=>{if("Escape"!==e.code)return;const t=this.stack.at(-1);"page"!==(null==t?void 0:t.type)?j||this.stack.length&&t&&this.closeOverlay(t):e.preventDefault()},this.bindEvents()}get document(){return this.root.ownerDocument||document}bindEvents(){this.document.addEventListener("pointerdown",this.handlePointerdown),this.document.addEventListener("pointerup",this.handlePointerup),this.document.addEventListener("keydown",this.handleKeydown)}closeOverlay(e){const t=this.stack.indexOf(e);t>-1&&this.stack.splice(t,1),e.open=!1}overlaysByTriggerElement(e){return this.stack.filter((t=>t.triggerElement===e))}add(e){if(this.stack.includes(e)){const t=this.stack.indexOf(e);t>-1&&(this.stack.splice(t,1),this.stack.push(e))}else{if("auto"===e.type||"modal"===e.type||"page"===e.type){const t="sp-overlay-query-path",n=new Event(t,{composed:!0,bubbles:!0});e.addEventListener(t,(e=>{const t=e.composedPath();this.stack.forEach((e=>{!t.find((t=>t===e))&&"manual"!==e.type&&this.closeOverlay(e)}))}),{once:!0}),e.dispatchEvent(n)}else"hint"===e.type&&this.stack.forEach((e=>{"hint"===e.type&&this.closeOverlay(e)}));requestAnimationFrame((()=>{this.stack.push(e),e.addEventListener("beforetoggle",this.handleBeforetoggle,{once:!0})}))}}remove(e){this.closeOverlay(e)}},q=Math.min,I=Math.max,V=Math.round,U=Math.floor,_=e=>({x:e,y:e}),z={left:"right",right:"left",bottom:"top",top:"bottom"},K={start:"end",end:"start"};function X(e,t,n){return I(e,q(t,n))}function Y(e,t){return"function"==typeof e?e(t):e}function J(e){return e.split("-")[0]}function Z(e){return e.split("-")[1]}function G(e){return"x"===e?"y":"x"}function Q(e){return"y"===e?"height":"width"}function ee(e){return["top","bottom"].includes(J(e))?"y":"x"}function te(e){return G(ee(e))}function ne(e){return e.replace(/start|end/g,(e=>K[e]))}function oe(e){return e.replace(/left|right|bottom|top/g,(e=>z[e]))}function ie(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function se(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function re(e,t,n){let{reference:o,floating:i}=e;const s=ee(t),r=te(t),l=Q(r),a=J(t),c="y"===s,h=o.x+o.width/2-i.width/2,d=o.y+o.height/2-i.height/2,p=o[l]/2-i[l]/2;let u;switch(a){case"top":u={x:h,y:o.y-i.height};break;case"bottom":u={x:h,y:o.y+o.height};break;case"right":u={x:o.x+o.width,y:d};break;case"left":u={x:o.x-i.width,y:d};break;default:u={x:o.x,y:o.y}}switch(Z(t)){case"start":u[r]-=p*(n&&c?-1:1);break;case"end":u[r]+=p*(n&&c?-1:1)}return u}async function le(e,t){var n;void 0===t&&(t={});const{x:o,y:i,platform:s,rects:r,elements:l,strategy:a}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:p=!1,padding:u=0}=Y(t,e),g=ie(u),m=l[p?"floating"===d?"reference":"floating":d],f=se(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:h,strategy:a})),v="floating"===d?{...r.floating,x:o,y:i}:r.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(l.floating)),b=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},w=se(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:a}):v);return{top:(f.top-w.top+g.top)/b.y,bottom:(w.bottom-f.bottom+g.bottom)/b.y,left:(f.left-w.left+g.left)/b.x,right:(w.right-f.right+g.right)/b.x}}const ae=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:i,y:s,placement:r,middlewareData:l}=t,a=await async function(e,t){const{placement:n,platform:o,elements:i}=e,s=await(null==o.isRTL?void 0:o.isRTL(i.floating)),r=J(n),l=Z(n),a="y"===ee(n),c=["left","top"].includes(r)?-1:1,h=s&&a?-1:1,d=Y(t,e);let{mainAxis:p,crossAxis:u,alignmentAxis:g}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return l&&"number"==typeof g&&(u="end"===l?-1*g:g),a?{x:u*h,y:p*c}:{x:p*c,y:u*h}}(t,e);return r===(null==(n=l.offset)?void 0:n.placement)&&null!=(o=l.arrow)&&o.alignmentOffset?{}:{x:i+a.x,y:s+a.y,data:{...a,placement:r}}}}};function ce(e){return pe(e)?(e.nodeName||"").toLowerCase():"#document"}function he(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function de(e){var t;return null==(t=(pe(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function pe(e){return e instanceof Node||e instanceof he(e).Node}function ue(e){return e instanceof Element||e instanceof he(e).Element}function ge(e){return e instanceof HTMLElement||e instanceof he(e).HTMLElement}function me(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof he(e).ShadowRoot)}function fe(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=Ee(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function ve(e){return["table","td","th"].includes(ce(e))}function ye(e){const t=be(),n=Ee(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function be(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function we(e){return["html","body","#document"].includes(ce(e))}function Ee(e){return he(e).getComputedStyle(e)}function xe(e){return ue(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ce(e){if("html"===ce(e))return e;const t=e.assignedSlot||e.parentNode||me(e)&&e.host||de(e);return me(t)?t.host:t}function Pe(e){const t=Ce(e);return we(t)?e.ownerDocument?e.ownerDocument.body:e.body:ge(t)&&fe(t)?t:Pe(t)}function Te(e,t,n){var o;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=Pe(e),s=i===(null==(o=e.ownerDocument)?void 0:o.body),r=he(i);return s?t.concat(r,r.visualViewport||[],fe(i)?i:[],r.frameElement&&n?Te(r.frameElement):[]):t.concat(i,Te(i,[],n))}function ke(e){const t=Ee(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=ge(e),s=i?e.offsetWidth:n,r=i?e.offsetHeight:o,l=V(n)!==s||V(o)!==r;return l&&(n=s,o=r),{width:n,height:o,$:l}}function Oe(e){return ue(e)?e:e.contextElement}function Ae(e){const t=Oe(e);if(!ge(t))return _(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:s}=ke(t);let r=(s?V(n.width):n.width)/o,l=(s?V(n.height):n.height)/i;return r&&Number.isFinite(r)||(r=1),l&&Number.isFinite(l)||(l=1),{x:r,y:l}}const Le=_(0);function Se(e){const t=he(e);return be()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Le}function De(e,t,n,o){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=Oe(e);let r=_(1);t&&(o?ue(o)&&(r=Ae(o)):r=Ae(e));const l=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==he(e))&&t}(s,n,o)?Se(s):_(0);let a=(i.left+l.x)/r.x,c=(i.top+l.y)/r.y,h=i.width/r.x,d=i.height/r.y;if(s){const e=he(s),t=o&&ue(o)?he(o):o;let n=e,i=n.frameElement;for(;i&&o&&t!==n;){const e=Ae(i),t=i.getBoundingClientRect(),o=Ee(i),s=t.left+(i.clientLeft+parseFloat(o.paddingLeft))*e.x,r=t.top+(i.clientTop+parseFloat(o.paddingTop))*e.y;a*=e.x,c*=e.y,h*=e.x,d*=e.y,a+=s,c+=r,n=he(i),i=n.frameElement}}return se({width:h,height:d,x:a,y:c})}const Re=[":popover-open",":modal"];function $e(e){return Re.some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Fe(e){return De(de(e)).left+xe(e).scrollLeft}function Ne(e,t,n){let o;if("viewport"===t)o=function(e,t){const n=he(e),o=de(e),i=n.visualViewport;let s=o.clientWidth,r=o.clientHeight,l=0,a=0;if(i){s=i.width,r=i.height;const e=be();(!e||e&&"fixed"===t)&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:r,x:l,y:a}}(e,n);else if("document"===t)o=function(e){const t=de(e),n=xe(e),o=e.ownerDocument.body,i=I(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=I(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let r=-n.scrollLeft+Fe(e);const l=-n.scrollTop;return"rtl"===Ee(o).direction&&(r+=I(t.clientWidth,o.clientWidth)-i),{width:i,height:s,x:r,y:l}}(de(e));else if(ue(t))o=function(e,t){const n=De(e,!0,"fixed"===t),o=n.top+e.clientTop,i=n.left+e.clientLeft,s=ge(e)?Ae(e):_(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:o*s.y}}(t,n);else{const n=Se(e);o={...t,x:t.x-n.x,y:t.y-n.y}}return se(o)}function Be(e,t){const n=Ce(e);return!(n===t||!ue(n)||we(n))&&("fixed"===Ee(n).position||Be(n,t))}function Me(e,t,n){const o=ge(t),i=de(t),s="fixed"===n,r=De(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const a=_(0);if(o||!o&&!s)if(("body"!==ce(t)||fe(i))&&(l=xe(t)),o){const e=De(t,!0,s,t);a.x=e.x+t.clientLeft,a.y=e.y+t.clientTop}else i&&(a.x=Fe(i));return{x:r.left+l.scrollLeft-a.x,y:r.top+l.scrollTop-a.y,width:r.width,height:r.height}}function He(e,t){return ge(e)&&"fixed"!==Ee(e).position?t?t(e):e.offsetParent:null}function je(e,t){const n=he(e);if(!ge(e)||$e(e))return n;let o=He(e,t);for(;o&&ve(o)&&"static"===Ee(o).position;)o=He(o,t);return o&&("html"===ce(o)||"body"===ce(o)&&"static"===Ee(o).position&&!ye(o))?n:o||function(e){let t=Ce(e);for(;ge(t)&&!we(t);){if(ye(t))return t;t=Ce(t)}return null}(e)||n}const We={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:i}=e;const s="fixed"===i,r=de(o),l=!!t&&$e(t.floating);if(o===r||l&&s)return n;let a={scrollLeft:0,scrollTop:0},c=_(1);const h=_(0),d=ge(o);if((d||!d&&!s)&&(("body"!==ce(o)||fe(r))&&(a=xe(o)),ge(o))){const e=De(o);c=Ae(o),h.x=e.x+o.clientLeft,h.y=e.y+o.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+h.x,y:n.y*c.y-a.scrollTop*c.y+h.y}},getDocumentElement:de,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const s=[..."clippingAncestors"===n?function(e,t){const n=t.get(e);if(n)return n;let o=Te(e,[],!1).filter((e=>ue(e)&&"body"!==ce(e))),i=null;const s="fixed"===Ee(e).position;let r=s?Ce(e):e;for(;ue(r)&&!we(r);){const t=Ee(r),n=ye(r);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||fe(r)&&!n&&Be(e,r))?o=o.filter((e=>e!==r)):i=t,r=Ce(r)}return t.set(e,o),o}(t,this._c):[].concat(n),o],r=s[0],l=s.reduce(((e,n)=>{const o=Ne(t,n,i);return e.top=I(o.top,e.top),e.right=q(o.right,e.right),e.bottom=q(o.bottom,e.bottom),e.left=I(o.left,e.left),e}),Ne(t,r,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:je,getElementRects:async function(e){const t=this.getOffsetParent||je,n=this.getDimensions;return{reference:Me(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=ke(e);return{width:t,height:n}},getScale:Ae,isElement:ue,isRTL:function(e){return"rtl"===Ee(e).direction}};function qe(e,t,n,o){void 0===o&&(o={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:a=!1}=o,c=Oe(e),h=i||s?[...c?Te(c):[],...Te(t)]:[];h.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const d=c&&l?function(e,t){let n,o=null;const i=de(e);function s(){var e;clearTimeout(n),null==(e=o)||e.disconnect(),o=null}return function r(l,a){void 0===l&&(l=!1),void 0===a&&(a=1),s();const{left:c,top:h,width:d,height:p}=e.getBoundingClientRect();if(l||t(),!d||!p)return;const u={rootMargin:-U(h)+"px "+-U(i.clientWidth-(c+d))+"px "+-U(i.clientHeight-(h+p))+"px "+-U(c)+"px",threshold:I(0,q(1,a))||1};let g=!0;function m(e){const t=e[0].intersectionRatio;if(t!==a){if(!g)return r();t?r(!1,t):n=setTimeout((()=>{r(!1,1e-7)}),100)}g=!1}try{o=new IntersectionObserver(m,{...u,root:i.ownerDocument})}catch(e){o=new IntersectionObserver(m,u)}o.observe(e)}(!0),s}(c,n):null;let p,u=-1,g=null;r&&(g=new ResizeObserver((e=>{let[o]=e;o&&o.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame((()=>{var e;null==(e=g)||e.observe(t)}))),n()})),c&&!a&&g.observe(c),g.observe(t));let m=a?De(e):null;return a&&function t(){const o=De(e);!m||o.x===m.x&&o.y===m.y&&o.width===m.width&&o.height===m.height||n();m=o,p=requestAnimationFrame(t)}(),n(),()=>{var e;h.forEach((e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=g)||e.disconnect(),g=null,a&&cancelAnimationFrame(p)}}const Ie=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:s=!0,crossAxis:r=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...a}=Y(e,t),c={x:n,y:o},h=await le(t,a),d=ee(J(i)),p=G(d);let u=c[p],g=c[d];if(s){const e="y"===p?"bottom":"right";u=X(u+h["y"===p?"top":"left"],u,u-h[e])}if(r){const e="y"===d?"bottom":"right";g=X(g+h["y"===d?"top":"left"],g,g-h[e])}const m=l.fn({...t,[p]:u,[d]:g});return{...m,data:{x:m.x-n,y:m.y-o}}}}},Ve=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:s,rects:r,initialPlacement:l,platform:a,elements:c}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...f}=Y(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const v=J(i),y=J(l)===l,b=await(null==a.isRTL?void 0:a.isRTL(c.floating)),w=p||(y||!m?[oe(l)]:function(e){const t=oe(e);return[ne(e),t,ne(t)]}(l));p||"none"===g||w.push(...function(e,t,n,o){const i=Z(e);let s=function(e,t,n){const o=["left","right"],i=["right","left"],s=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?s:r;default:return[]}}(J(e),"start"===n,o);return i&&(s=s.map((e=>e+"-"+i)),t&&(s=s.concat(s.map(ne)))),s}(l,m,g,b));const E=[l,...w],x=await le(t,f),C=[];let P=(null==(o=s.flip)?void 0:o.overflows)||[];if(h&&C.push(x[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const o=Z(e),i=te(e),s=Q(i);let r="x"===i?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=oe(r)),[r,oe(r)]}(i,r,b);C.push(x[e[0]],x[e[1]])}if(P=[...P,{placement:i,overflows:C}],!C.every((e=>e<=0))){var T,k;const e=((null==(T=s.flip)?void 0:T.index)||0)+1,t=E[e];if(t)return{data:{index:e,overflows:P},reset:{placement:t}};let n=null==(k=P.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:k.placement;if(!n)switch(u){case"bestFit":{var O;const e=null==(O=P.map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:O[0];e&&(n=e);break}case"initialPlacement":n=l}if(i!==n)return{reset:{placement:n}}}return{}}}},Ue=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:i,elements:s}=t,{apply:r=(()=>{}),...l}=Y(e,t),a=await le(t,l),c=J(n),h=Z(n),d="y"===ee(n),{width:p,height:u}=o.floating;let g,m;"top"===c||"bottom"===c?(g=c,m=h===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,g="end"===h?"top":"bottom");const f=u-a[g],v=p-a[m],y=!t.middlewareData.shift;let b=f,w=v;if(d){const e=p-a.left-a.right;w=h||y?q(v,e):e}else{const e=u-a.top-a.bottom;b=h||y?q(f,e):e}if(y&&!h){const e=I(a.left,0),t=I(a.right,0),n=I(a.top,0),o=I(a.bottom,0);d?w=p-2*(0!==e||0!==t?e+t:I(a.left,a.right)):b=u-2*(0!==n||0!==o?n+o:I(a.top,a.bottom))}await r({...t,availableWidth:w,availableHeight:b});const E=await i.getDimensions(s.floating);return p!==E.width||u!==E.height?{reset:{rects:!0}}:{}}}},_e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:s,platform:r,elements:l,middlewareData:a}=t,{element:c,padding:h=0}=Y(e,t)||{};if(null==c)return{};const d=ie(h),p={x:n,y:o},u=te(i),g=Q(u),m=await r.getDimensions(c),f="y"===u,v=f?"top":"left",y=f?"bottom":"right",b=f?"clientHeight":"clientWidth",w=s.reference[g]+s.reference[u]-p[u]-s.floating[g],E=p[u]-s.reference[u],x=await(null==r.getOffsetParent?void 0:r.getOffsetParent(c));let C=x?x[b]:0;C&&await(null==r.isElement?void 0:r.isElement(x))||(C=l.floating[b]||s.floating[g]);const P=w/2-E/2,T=C/2-m[g]/2-1,k=q(d[v],T),O=q(d[y],T),A=k,L=C-m[g]-O,S=C/2-m[g]/2+P,D=X(A,S,L),R=!a.arrow&&null!=Z(i)&&S!==D&&s.reference[g]/2-(S<A?k:O)-m[g]/2<0,$=R?S<A?S-A:S-L:0;return{[u]:p[u]+$,data:{[u]:D,centerOffset:S-D-$,...R&&{alignmentOffset:$}},reset:R}}}),ze=(e,t,n)=>{const o=new Map,i={platform:We,...n},s={...i.platform,_c:o};return(async(e,t,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:r}=n,l=s.filter(Boolean),a=await(null==r.isRTL?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:d}=re(c,o,a),p=o,u={},g=0;for(let n=0;n<l.length;n++){const{name:s,fn:m}=l[n],{x:f,y:v,data:y,reset:b}=await m({x:h,y:d,initialPlacement:o,placement:p,strategy:i,middlewareData:u,rects:c,platform:r,elements:{reference:e,floating:t}});h=null!=f?f:h,d=null!=v?v:d,u={...u,[s]:{...u[s],...y}},b&&g<=50&&(g++,"object"==typeof b&&(b.placement&&(p=b.placement),b.rects&&(c=!0===b.rects?await r.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:h,y:d}=re(c,p,a))),n=-1)}return{x:h,y:d,placement:p,strategy:i,middlewareData:u}})(e,t,{...i,platform:s})};function Ke(e){return Ye(e)?(e.nodeName||"").toLowerCase():"#document"}function Xe(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Ye(e){return e instanceof Node||e instanceof Xe(e).Node}function Je(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof Xe(e).ShadowRoot)}function Ze(e){const t=!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none"),n=function(e){return Xe(e).getComputedStyle(e)}(e);return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Ge(e){if("html"===Ke(e))return e;const t=e.assignedSlot||e.parentNode||Je(e)&&e.host||function(e){var t;return null==(t=(Ye(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}(e);return Je(t)?t.host:t}const Qe=()=>({name:"topLayer",async fn(e){const{x:t,y:n,elements:{reference:o,floating:i}}=e;let s=!1,r=!1,l=!1;const a={x:0,y:0};try{s=s||i.matches(":popover-open")}catch(e){}try{s=s||i.matches(":open")}catch(e){}try{s=s||i.matches(":modal")}catch(e){}r=s;const c=new Event("floating-ui-dialog-test",{composed:!0,bubbles:!0});i.addEventListener("floating-ui-dialog-test",(e=>{e.composedPath().forEach((e=>{if(l=l||e===o,e!==i&&"dialog"===e.localName)try{s=s||e.matches(":modal")}catch(e){}}))}),{once:!0}),i.dispatchEvent(c);let h=!1;if(!(o instanceof H)){const e=l?o:i,t=Ze(e)?e:function(e){let t=Ge(e);for(;((n=t)instanceof HTMLElement||n instanceof Xe(n).HTMLElement)&&!["html","body","#document"].includes(Ke(t));){if(Ze(t))return t;t=Ge(t)}var n;return null}(e);if(null!==t&&Xe(t)!==t){const e=getComputedStyle(t);h="none"!==e.transform||!!e.filter&&"none"!==e.filter||["paint","layout","strict","content"].some((t=>(e.contain||"").includes(t)))}if(s&&h&&t){const e=t.getBoundingClientRect();a.x=e.x,a.y=e.y}}return s&&r?{x:t+a.x,y:n+a.y,data:a}:s?{x:t,y:n,data:a}:{x:t-a.x,y:n-a.y,data:a}}});function et(e){if(void 0===e)return 0;const t=window.devicePixelRatio||1;return Math.round(e*t)/t}const tt=e=>{var t;return null!=(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[e])?t:[e]};class nt{constructor(e){this.originalPlacements=new WeakMap,this.allowPlacementUpdate=!1,this.updatePlacement=()=>{this.allowPlacementUpdate||"modal"===this.options.type||!this.cleanup?(this.computePlacement(),this.allowPlacementUpdate=!1):this.target.dispatchEvent(new Event("close",{bubbles:!0}))},this.resetOverlayPosition=()=>{!this.target||!this.options||(this.target.style.removeProperty("max-height"),this.target.style.removeProperty("height"),this.initialHeight=void 0,this.isConstrained=!1,this.host.offsetHeight,this.computePlacement())},this.host=e,this.host.addController(this)}async placeOverlay(e=this.target,t=this.options){if(this.target=e,this.options=t,!e||!t)return;const n=qe(t.trigger,e,this.updatePlacement,{elementResize:!1,layoutShift:!1});this.cleanup=()=>{var e;null==(e=this.host.elements)||e.forEach((e=>{e.addEventListener("sp-closed",(()=>{const t=this.originalPlacements.get(e);t&&e.setAttribute("placement",t),this.originalPlacements.delete(e)}),{once:!0})})),n()}}async computePlacement(){var e,t;const{options:n,target:o}=this;await(document.fonts?document.fonts.ready:Promise.resolve());const i=n.trigger instanceof HTMLElement?Ve():Ve({padding:8,fallbackPlacements:tt(n.placement)}),[s=0,r=0]=Array.isArray(null==n?void 0:n.offset)?n.offset:[n.offset,0],l=null==(e=this.host.elements.find((e=>e.tipElement)))?void 0:e.tipElement,a=[ae({mainAxis:s,crossAxis:r}),Ie({padding:8}),i,Ue({padding:8,apply:({availableWidth:e,availableHeight:t,rects:{floating:n}})=>{const i=Math.max(100,Math.floor(t)),s=n.height;this.initialHeight=this.isConstrained&&this.initialHeight||s,this.isConstrained=s<this.initialHeight||i<=s;const r=this.isConstrained?`${i}px`:"";Object.assign(o.style,{maxWidth:`${Math.floor(e)}px`,maxHeight:r,height:r})}}),...l?[_e({element:l,padding:n.tipPadding||8})]:[],Qe()],{x:c,y:h,placement:d,middlewareData:p}=await ze(n.trigger,o,{placement:n.placement,middleware:a,strategy:"fixed"});if(Object.assign(o.style,{top:"0px",left:"0px",translate:`${et(c)}px ${et(h)}px`}),o.setAttribute("actual-placement",d),null==(t=this.host.elements)||t.forEach((e=>{this.originalPlacements.set(e,e.getAttribute("placement")),e.setAttribute("placement",d)})),l&&p.arrow){const{x:e,y:t}=p.arrow;Object.assign(l.style,{top:d.startsWith("right")||d.startsWith("left")?"0px":"",left:d.startsWith("bottom")||d.startsWith("top")?"0px":"",translate:`${et(e)}px ${et(t)}px`})}}hostConnected(){document.addEventListener("sp-update-overlays",this.resetOverlayPosition)}hostUpdated(){var e;this.host.open||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)}hostDisconnected(){var e;null==(e=this.cleanup)||e.call(this),this.cleanup=void 0,document.removeEventListener("sp-update-overlays",this.resetOverlayPosition)}}const ot=n`
:host{--swc-overlay-animation-distance:var(
--spectrum-picker-m-texticon-popover-offset-y,var(--spectrum-global-dimension-size-75)
);display:contents;pointer-events:none}.dialog{--sp-overlay-open:true;background:none;border:0;box-sizing:border-box;display:flex;height:auto;inset:auto;left:0;margin:0;max-height:calc(100vh - 16px);max-height:calc(100dvh - 16px);max-width:calc(100vw - 16px);opacity:1!important;overflow:visible;padding:0;position:fixed;top:0}.dialog:not([is-visible]){translate:-999em -999em!important}.dialog:focus{outline:none}dialog:modal{--mod-popover-filter:var(--spectrum-popover-filter)}:host(:not([open])) .dialog{--sp-overlay-open:false}.dialog::backdrop{display:none}.dialog:before{content:"";inset:-999em;pointer-events:auto!important;position:absolute}.dialog:not(.not-immediately-closable):before{display:none}.dialog>div{width:100%}::slotted(*){pointer-events:auto}::slotted(sp-popover){position:static}::slotted(sp-tooltip){--swc-tooltip-margin:0}.dialog:not([actual-placement])[placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=top]{margin-top:var(--swc-overlay-animation-distance);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=right]{margin-left:calc(var(--swc-overlay-animation-distance)*-1);padding-inline:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=bottom]{margin-top:calc(var(--swc-overlay-animation-distance)*-1);padding-block:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=left]{margin-left:var(--swc-overlay-animation-distance);padding-inline:var(--swc-overlay-animation-distance)}slot[name=longpress-describedby-descriptor]{display:none}@supports selector(:open){.dialog{opacity:0}.dialog:open{--mod-popover-filter:var(--spectrum-popover-filter);opacity:1}}@supports selector(:popover-open){.dialog{opacity:0}.dialog:popover-open{--mod-popover-filter:var(--spectrum-popover-filter);opacity:1}}@supports (not selector(:open)) and (not selector(:popover-open)){:host:not([open]) .dialog{pointer-events:none}.dialog[actual-placement]{z-index:calc(var(--swc-overlay-z-index-base, 1000) + var(--swc-overlay-open-count))}}
`;var it=Object.defineProperty,st=Object.getOwnPropertyDescriptor,rt=(e,t,n,o)=>{for(var i,s=o>1?void 0:o?st(t,n):t,r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o?i(t,n,s):i(s))||s);return o&&s&&it(t,n,s),s};const lt={touch:"Double tap and long press for additional options",keyboard:"Press Space or Alt+Down Arrow for additional options",mouse:"Click and hold for additional options"},at="showPopover"in document.createElement("div");let ct=function(e){return class extends e{async manageDialogOpen(){const e=this.open;if(await this.managePosition(),this.open!==e||this.open!==e)return;const t=await this.dialogMakeTransition(e);this.open===e&&await this.dialogApplyFocus(e,t)}async dialogMakeTransition(e){let t=null;const n=(n,o)=>async()=>{if(void 0!==n.open&&(n.open=e),!e){const e=()=>{n.removeEventListener("close",e)};n.addEventListener("close",e)}if(o>0)return;const i=e?L:A;this.dispatchEvent(new i),e&&(t=t||B(n),t||n.querySelectorAll("slot").forEach((e=>{t||(t=M(e))})),this.isConnected&&!this.dialogEl.open&&this.dialogEl.showModal())},o=(t,n)=>()=>{if(this.open!==e)return;const o=e?"sp-opened":"sp-closed";if(n>0)return void t.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}}));if(!this.isConnected||e!==this.open)return;const i=()=>{const n=this.triggerElement instanceof H;this.dispatchEvent(new Event(o,{bubbles:n,composed:n})),t.dispatchEvent(new Event(o,{bubbles:!1,composed:!1})),this.triggerElement&&!n&&this.triggerElement.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=e?"opened":"closed"};!e&&this.dialogEl.open?(this.dialogEl.addEventListener("close",(()=>{i()}),{once:!0}),this.dialogEl.close()):i()};return this.elements.forEach(((e,t)=>{S(e,n(e,t),o(e,t))})),t}async dialogApplyFocus(e,t){this.applyFocus(e,t)}}}(class extends e{constructor(){super(...arguments),this.dispose=O}async applyFocus(e,t){}async ensureOnDOM(e){}async makeTransition(e){return null}async manageDelay(e){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(e){}get state(){return"closed"}set state(e){}manuallyKeepOpen(){}static update(){const e=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}static async open(e,t,n,o){var i,s,r,l;const a=2===arguments.length,c=n||e,h=new dt;let d=!1;h.dispose=()=>{h.addEventListener("sp-closed",(()=>{d||(p(),d=!0),requestAnimationFrame((()=>{h.remove()}))})),h.open=!1,h.dispose=O};const p=((e,t,{position:n,prepareCallback:o}={position:"beforeend"})=>{let{length:i}=e;if(0===i)return()=>e;let s=1,r=0;("afterbegin"===n||"afterend"===n)&&(s=-1,r=i-1);const l=new Array(i),a=new Array(i),c=document.createComment("placeholder for reparented element");do{const i=e[r];o&&(a[r]=o(i)),l[r]=c.cloneNode();const h=i.parentElement||i.getRootNode();h&&h!==i&&h.replaceChild(l[r],i),t.insertAdjacentElement(n,i),r+=s}while(--i>0);return function(){return function(e,t,n=[]){for(let o=0;o<t.length;++o){const i=t[o],s=e[o],r=s.parentElement||s.getRootNode();n[o]&&n[o](i),r&&r!==s&&r.replaceChild(i,s),delete e[o]}return t}(l,e,a)}})([c],h,{position:"beforeend",prepareCallback:e=>{const t=e.slot;return e.removeAttribute("slot"),()=>{e.slot=t}}});if(!a&&c&&o){const n=e,r=t,l=o;return h.delayed=l.delayed||c.hasAttribute("delayed"),h.receivesFocus=null!=(i=l.receivesFocus)?i:"auto",h.triggerElement=l.virtualTrigger||n,h.type="modal"===r?"modal":"hover"===r?"hint":"auto",h.offset=null!=(s=l.offset)?s:6,h.placement=l.placement,h.willPreventClose=!!l.notImmediatelyClosable,n.insertAdjacentElement("afterend",h),await h.updateComplete,h.open=!0,h.dispose}const u=t;return h.append(c),h.delayed=u.delayed||c.hasAttribute("delayed"),h.receivesFocus=null!=(r=u.receivesFocus)?r:"auto",h.triggerElement=u.trigger||null,h.type=u.type||"modal",h.offset=null!=(l=u.offset)?l:6,h.placement=u.placement,h.willPreventClose=!!u.notImmediatelyClosable,h.updateComplete.then((()=>{h.open=!0})),h}});ct=at?function(e){return class extends e{async manageDelay(e){!1!==e&&e===this.open?this.delayed&&await k.openTimer(this)&&(this.open=!e):k.close(this)}async shouldHidePopover(e){e&&this.open!==e||await this.placementController.resetOverlayPosition()}async shouldShowPopover(e){let t=!1;try{t=this.dialogEl.matches(":popover-open")}catch(e){}let n=!1;try{n=this.dialogEl.matches(":open")}catch(e){}e&&this.open===e&&!t&&!n&&this.isConnected&&(this.dialogEl.showPopover(),await this.managePosition())}async ensureOnDOM(e){await D(),await this.shouldHidePopover(e),await this.shouldShowPopover(e),await D()}async makeTransition(e){if(this.open!==e)return null;let t=null;const n=(n,o)=>()=>{if(void 0!==n.open&&(n.open=e),0===o){const t=e?L:A;this.dispatchEvent(new t)}e&&(t=t||B(n),!t)&&n.querySelectorAll("slot").forEach((e=>{t||(t=M(e))}))},o=(t,n)=>async()=>{if(this.open!==e)return;const o=e?"sp-opened":"sp-closed";if(n>0)return void t.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}}));const i=async()=>{if(this.open!==e)return;await D();const n=this.triggerElement instanceof H;this.dispatchEvent(new Event(o,{bubbles:n,composed:n})),t.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}})),this.triggerElement&&!n&&this.triggerElement.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=e?"opened":"closed"};if(this.open!==e)return;let s=!1;try{s=this.dialogEl.matches(":popover-open")}catch(e){}let r=!1;try{r=this.dialogEl.matches(":open")}catch(e){}!0!==e&&(s||r)&&this.isConnected?(this.dialogEl.addEventListener("beforetoggle",(()=>{i()}),{once:!0}),this.dialogEl.hidePopover()):i()};return this.elements.forEach(((e,t)=>{S(e,n(e,t),o(e,t))})),t}}}(ct):function(e){return class extends e{async managePopoverOpen(){await this.managePosition()}async manageDelay(e){!1!==e&&e===this.open?this.delayed&&await k.openTimer(this)&&(this.open=!e):k.close(this)}async ensureOnDOM(e){document.body.offsetHeight}async makeTransition(e){if(this.open!==e)return null;let t=null;const n=(n,o)=>()=>{if(e===this.open){if(void 0!==n.open&&(n.open=e),0===o){const t=e?L:A;this.dispatchEvent(new t)}!0!==e||(t=t||B(n),t)||n.querySelectorAll("slot").forEach((e=>{t||(t=M(e))}))}},o=(t,n)=>()=>{if(this.open!==e)return;const o=e?"sp-opened":"sp-closed";if(t.dispatchEvent(new CustomEvent(o,{bubbles:!1,composed:!1,detail:{interaction:this.type}})),n>0)return;const i=this.triggerElement instanceof H;this.dispatchEvent(new Event(o,{bubbles:i,composed:i})),this.triggerElement&&!i&&this.triggerElement.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0,detail:{interaction:this.type}})),this.state=e?"opened":"closed"};return this.elements.forEach(((e,t)=>{S(e,n(e,t),o(e,t))})),t}}}(ct);const ht=class e extends ct{constructor(){super(...arguments),this.delayed=!1,this._disabled=!1,this.longpressState="null",this.offset=6,this.placementController=new nt(this),this._open=!1,this.receivesFocus="auto",this.releaseAriaDescribedby=O,this.releaseLongpressDescribedby=O,this._state="closed",this.triggerElement=null,this.type="auto",this.wasOpen=!1,this.elementResolver=new C(this),this.closeOnFocusOut=e=>{if(!e.relatedTarget)return;const t=new Event("overlay-relation-query",{bubbles:!0,composed:!0});e.relatedTarget.addEventListener(t.type,(e=>{e.composedPath().includes(this)||(this.open=!1)})),e.relatedTarget.dispatchEvent(t)},this.elementIds=[],this.handlePointerdown=e=>{if(!this.triggerElement||0!==e.button)return;const t=this.triggerElement;this.longpressState="potential",document.addEventListener("pointerup",this.handlePointerup),document.addEventListener("pointercancel",this.handlePointerup),!t.holdAffordance&&(this.longressTimeout=setTimeout((()=>{t&&t.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"pointer"}}))}),300))},this.handlePointerup=()=>{clearTimeout(this.longressTimeout),this.triggerElement&&(this.longpressState="opening"===this.state?"pressed":"null",document.removeEventListener("pointerup",this.handlePointerup),document.removeEventListener("pointercancel",this.handlePointerup))},this.handleKeydown=e=>{const{code:t,altKey:n}=e;("Space"===t||n&&"ArrowDown"===t)&&"ArrowDown"===t&&(e.stopPropagation(),e.stopImmediatePropagation())},this.handleKeyup=e=>{const{code:t,altKey:n}=e;if("Space"===t||n&&"ArrowDown"===t){if(!this.triggerElement||!this.hasNonVirtualTrigger)return;e.stopPropagation(),this.triggerElement.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"keyboard"}})),setTimeout((()=>{this.longpressState="null"}))}},this.preventNextToggle=!1,this.handlePointerdownForClick=()=>{this.preventNextToggle=this.open},this.handleClick=()=>{"opening"===this.longpressState||"pressed"===this.longpressState||(this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1)},this.focusedin=!1,this.handleFocusin=()=>{this.open=!0,this.focusedin=!0},this.handleFocusout=()=>{this.focusedin=!1,!this.pointerentered&&(this.open=!1)},this.pointerentered=!1,this.handlePointerenter=()=>{this.disabled||(this.open=!0,this.pointerentered=!0)},this.handlePointerleave=e=>{this===e.relatedTarget||this.contains(e.relatedTarget)||[...this.children].find((t=>"slot"===t.localName&&t.assignedElements({flatten:!0}).find((t=>t===e.relatedTarget||t.contains(e.relatedTarget)))))||this.doPointerleave()},this.handleOverlayPointerleave=e=>{this.triggerElement===e.relatedTarget||this.hasNonVirtualTrigger&&this.triggerElement.contains(e.relatedTarget)||this.doPointerleave()},this.handleLongpress=()=>{this.open=!0,this.longpressState="potential"===this.longpressState?"opening":"pressed"},this.willPreventClose=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=e,e?(this.hasNonVirtualTrigger&&this.unbindEvents(),this.wasOpen=this.open,this.open=!1):(this.bindEvents(),this.open=this.open||this.wasOpen,this.wasOpen=!1)}get hasNonVirtualTrigger(){return!(!this.triggerElement||this.triggerElement instanceof H)}get open(){return this._open}set open(t){t&&this.disabled||t!==this.open&&(("opening"===this.longpressState||"pressed"===this.longpressState)&&!t||(this._open=t,this.open&&(e.openCount+=1),this.requestUpdate("open",!this.open)))}get state(){return this._state}set state(e){if(e===this.state)return;const t=this.state;this._state=e,("opened"===this.state||"closed"===this.state)&&(this.longpressState="pressed"===this.longpressState?"null":this.longpressState),this.requestUpdate("state",t)}get usesDialog(){return"modal"===this.type||"page"===this.type}get popoverValue(){if("popover"in this)switch(this.type){case"modal":case"page":return;case"hint":return"manual";default:return this.type}}get requiresPosition(){return!("page"===this.type||!this.open||!this.triggerElement||!this.placement&&"hint"!==this.type)}managePosition(){if(!this.requiresPosition||!this.open)return;const e=this.offset||0,t=this.triggerElement,n=this.placement||"right",o=this.tipPadding;this.placementController.placeOverlay(this.dialogEl,{offset:e,placement:n,tipPadding:o,trigger:t,type:this.type})}async managePopoverOpen(){super.managePopoverOpen();const e=this.open;if(this.open!==e||(await this.manageDelay(e),this.open!==e)||(await this.ensureOnDOM(e),this.open!==e))return;const t=await this.makeTransition(e);this.open===e&&await this.applyFocus(e,t)}async applyFocus(e,t){if("false"!==this.receivesFocus&&"hint"!==this.type){if(await D(),await D(),e===this.open&&!this.open)return void(this.hasNonVirtualTrigger&&this.contains(this.getRootNode().activeElement)&&this.triggerElement.focus());null==t||t.focus()}}async manageOpen(e){var t;if(this.isConnected||!this.open){if(this.hasUpdated||await this.updateComplete,this.open?(W.add(this),this.willPreventClose&&(document.addEventListener("pointerup",(()=>{this.dialogEl.classList.toggle("not-immediately-closable",!1),this.willPreventClose=!1}),{once:!0}),this.dialogEl.classList.toggle("not-immediately-closable",!0))):(e&&this.dispose(),W.remove(this)),this.open&&"opened"!==this.state?this.state="opening":!this.open&&"closed"!==this.state&&(this.state="closing"),this.usesDialog?this.manageDialogOpen():this.managePopoverOpen(),"auto"===this.type){const e=this.getRootNode();this.open?e.addEventListener("focusout",this.closeOnFocusOut,{capture:!0}):e.removeEventListener("focusout",this.closeOnFocusOut,{capture:!0})}if(!this.open){const e=()=>{var e;const t=[];let n=document.activeElement;for(;null!=n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;for(;n;){const o=n.assignedSlot||n.parentElement||(null==(e=n.getRootNode())?void 0:e.host);o&&t.push(o),n=o}return t};null!=(t=this.triggerElement)&&t.focus&&(this.contains(this.getRootNode().activeElement)||e().includes(this))&&this.triggerElement.focus()}}}unbindEvents(){var e;null==(e=this.abortController)||e.abort()}bindEvents(){if(!this.hasNonVirtualTrigger)return;this.abortController=new AbortController;const e=this.triggerElement;switch(this.triggerInteraction){case"click":return void this.bindClickEvents(e);case"longpress":return void this.bindLongpressEvents(e);case"hover":return void this.bindHoverEvents(e)}}bindClickEvents(e){const t={signal:this.abortController.signal};e.addEventListener("click",this.handleClick,t),e.addEventListener("pointerdown",this.handlePointerdownForClick,t)}bindLongpressEvents(e){const t={signal:this.abortController.signal};e.addEventListener("longpress",this.handleLongpress,t),e.addEventListener("pointerdown",this.handlePointerdown,t),this.prepareLongpressDescription(e),!e.holdAffordance&&(e.addEventListener("keydown",this.handleKeydown,t),e.addEventListener("keyup",this.handleKeyup,t))}bindHoverEvents(e){const t={signal:this.abortController.signal};e.addEventListener("focusin",this.handleFocusin,t),e.addEventListener("focusout",this.handleFocusout,t),e.addEventListener("pointerenter",this.handlePointerenter,t),e.addEventListener("pointerleave",this.handlePointerleave,t),this.addEventListener("pointerleave",this.handleOverlayPointerleave,t)}manageTriggerElement(e){e&&(this.unbindEvents(),this.releaseAriaDescribedby()),this.triggerElement&&!(this.triggerElement instanceof H)&&(this.bindEvents(),"true"!==this.receivesFocus&&this.prepareAriaDescribedby())}prepareLongpressDescription(e){if("longpress"!==this.triggerInteraction||this.releaseLongpressDescribedby!==O||!this.elements.length)return;const t=document.createElement("div");t.id=`longpress-describedby-descriptor-${crypto.randomUUID().slice(0,8)}`;const n=w()||E()?"touch":"keyboard";t.textContent=lt[n],t.slot="longpress-describedby-descriptor",e.insertAdjacentElement("afterend",t);const o=P(e,"aria-describedby",[t.id]);this.releaseLongpressDescribedby=()=>{o(),t.remove(),this.releaseLongpressDescribedby=O}}prepareAriaDescribedby(){if("hover"!==this.triggerInteraction||this.releaseAriaDescribedby!==O||!this.elements.length||!this.hasNonVirtualTrigger)return;const e=this.triggerElement,t=e.getRootNode(),n=this.elements[0].getRootNode();if(t==this.getRootNode()){const t=P(e,"aria-describedby",[this.id]);this.releaseAriaDescribedby=()=>{t(),this.releaseAriaDescribedby=O}}else if(t===n){this.elementIds=this.elements.map((e=>e.id));const t=this.elements.map((e=>(e.id||(e.id=`${this.tagName.toLowerCase()}-helper-${crypto.randomUUID().slice(0,8)}`),e.id))),n=P(e,"aria-describedby",t);this.releaseAriaDescribedby=()=>{n(),this.elements.map(((e,t)=>{e.id=this.elementIds[t]})),this.releaseAriaDescribedby=O}}}doPointerleave(){this.pointerentered=!1;const e=this.triggerElement;this.focusedin&&e.matches(":focus-visible")||(this.open=!1)}handleBeforetoggle(e){"open"!==e.newState&&this.handleBrowserClose()}handleBrowserClose(){"opening"===this.longpressState||"pressed"===this.longpressState?this.manuallyKeepOpen():this.open=!1}manuallyKeepOpen(){super.manuallyKeepOpen(),this.open=!0,this.placementController.allowPlacementUpdate=!0,this.manageOpen(!1)}handleSlotchange(){this.triggerElement&&this.prepareAriaDescribedby(),this.elements.length?this.hasNonVirtualTrigger&&this.prepareLongpressDescription(this.triggerElement):this.releaseLongpressDescribedby()}shouldPreventClose(){const e=this.willPreventClose;return this.willPreventClose=!1,e}willUpdate(e){var t;if(this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${crypto.randomUUID().slice(0,8)}`),e.has("open")&&(void 0!==e.get("open")||this.open)&&this.manageOpen(e.get("open")),e.has("trigger")){const[e,n]=(null==(t=this.trigger)?void 0:t.split("@"))||[];this.elementResolver.selector=e?`#${e}`:"",this.triggerInteraction=n}const n=this.triggerElement;e.has(x)&&(this.triggerElement=this.elementResolver.element,this.manageTriggerElement(n)),e.has("triggerElement")&&this.manageTriggerElement(e.get("triggerElement"))}updated(e){super.updated(e),e.has("placement")&&(this.placement?this.dialogEl.setAttribute("actual-placement",this.placement):this.dialogEl.removeAttribute("actual-placement"),this.open&&void 0!==e.get("placement")&&this.placementController.resetOverlayPosition())}renderContent(){return i`
            <slot @slotchange=${this.handleSlotchange}></slot>
        `}get dialogStyleMap(){return{"--swc-overlay-open-count":e.openCount.toString()}}renderDialog(){return i`
            <dialog
                class="dialog"
                part="dialog"
                placement=${c(this.requiresPosition?this.placement||"right":void 0)}
                style=${T(this.dialogStyleMap)}
                @close=${this.handleBrowserClose}
                @cancel=${this.handleBrowserClose}
                @beforetoggle=${this.handleBeforetoggle}
                ?is-visible=${"closed"!==this.state}
            >
                ${this.renderContent()}
            </dialog>
        `}renderPopover(){return i`
            <div
                class="dialog"
                part="dialog"
                placement=${c(this.requiresPosition?this.placement||"right":void 0)}
                popover=${c(this.popoverValue)}
                style=${T(this.dialogStyleMap)}
                @beforetoggle=${this.handleBeforetoggle}
                @close=${this.handleBrowserClose}
                ?is-visible=${"closed"!==this.state}
            >
                ${this.renderContent()}
            </div>
        `}render(){const e="modal"===this.type||"page"===this.type;return i`
            ${e?this.renderDialog():this.renderPopover()}
            <slot name="longpress-describedby-descriptor"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("close",(()=>{this.open=!1})),this.hasNonVirtualTrigger&&this.bindEvents()}disconnectedCallback(){this.hasNonVirtualTrigger&&this.unbindEvents(),this.releaseAriaDescribedby(),this.releaseLongpressDescribedby(),this.open=!1,super.disconnectedCallback()}};ht.styles=[ot],ht.openCount=1,rt([o({type:Boolean})],ht.prototype,"delayed",2),rt([a(".dialog")],ht.prototype,"dialogEl",2),rt([o({type:Boolean})],ht.prototype,"disabled",1),rt([r({flatten:!0,selector:':not([slot="longpress-describedby-descriptor"], slot)'})],ht.prototype,"elements",2),rt([o({type:Number})],ht.prototype,"offset",2),rt([o({type:Boolean,reflect:!0})],ht.prototype,"open",1),rt([o()],ht.prototype,"placement",2),rt([o({attribute:"receives-focus"})],ht.prototype,"receivesFocus",2),rt([a("slot")],ht.prototype,"slotEl",2),rt([l()],ht.prototype,"state",1),rt([o({type:Number,attribute:"tip-padding"})],ht.prototype,"tipPadding",2),rt([o()],ht.prototype,"trigger",2),rt([o({attribute:!1})],ht.prototype,"triggerElement",2),rt([o({attribute:!1})],ht.prototype,"triggerInteraction",2),rt([o()],ht.prototype,"type",2);let dt=ht;t("sp-overlay",dt);var pt=Object.freeze({__proto__:null});export{N as f,pt as s};
//# sourceMappingURL=chunk-sp-overlay.js.map
